{"ast":null,"code":"import { createStore } from 'vuex';\nconst ymaps = window.ymaps;\nexport default createStore({\n  state: {\n    mapYandex: null,\n    isMapLoaded: false,\n    marksConfigs: [{\n      id: 'universities',\n      config: {\n        iconLayout: 'default#image',\n        iconImageHref: '/placeMarks/aquaMark.svg',\n        iconImageSize: [55, 55],\n        iconImageOffset: [-30, -40]\n      }\n    }]\n  },\n  mutations: {\n    SET_MAP(state, {\n      map,\n      flag\n    }) {\n      state.map = map;\n      state.isMapLoaded = flag;\n    },\n    ADD_MARK(state, payload) {\n      console.log(state.map);\n      state.map.geoObjects.add(payload);\n    }\n  },\n  actions: {\n    createMap({\n      commit,\n      dispatch\n    }) {\n      ymaps.ready(() => {\n        const map = new ymaps.Map('map', {\n          center: [59.938955, 30.315644],\n          zoom: 10,\n          controls: []\n        });\n        commit('SET_MAP', {\n          map: map,\n          flag: true\n        });\n        dispatch('addMarks');\n      });\n    },\n    addMarks({\n      state,\n      commit\n    }) {\n      if (!state.map) {\n        return;\n      }\n      let universitiesCollection = new ymaps.GeoObjectCollection(null);\n      let universitiesArr = [{\n        name: \"ЛЭТИ\",\n        coordinates: [59.971942, 30.324294]\n      }, {\n        name: \"СПБГУ\",\n        coordinates: [59.941636, 30.299563]\n      }, {\n        name: \"БОНЧ\",\n        coordinates: [59.902821, 30.489175]\n      }];\n      let config = state.marksConfigs.find(item => item.id === 'universities').config;\n      for (let place of universitiesArr) {\n        universitiesCollection.add(new ymaps.Placemark(place.coordinates, {\n          balloonContent: place.name\n        }, config));\n      }\n      let map = state.map;\n      commit(\"ADD_MARK\", universitiesCollection);\n    }\n  }\n});","map":{"version":3,"names":["createStore","ymaps","window","state","mapYandex","isMapLoaded","marksConfigs","id","config","iconLayout","iconImageHref","iconImageSize","iconImageOffset","mutations","SET_MAP","map","flag","ADD_MARK","payload","console","log","geoObjects","add","actions","createMap","commit","dispatch","ready","Map","center","zoom","controls","addMarks","universitiesCollection","GeoObjectCollection","universitiesArr","name","coordinates","find","item","place","Placemark","balloonContent"],"sources":["/home/brulik/projects/hackaton_leti2/digital_students/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nconst ymaps = window.ymaps\n\nexport default createStore({\n  state: {\n    mapYandex: null,\n    isMapLoaded: false,\n    marksConfigs: [\n      {\n        id: 'universities', \n        config: {\n          iconLayout: 'default#image',\n          iconImageHref: '/placeMarks/aquaMark.svg',\n          iconImageSize: [55, 55],\n          iconImageOffset: [-30, -40],  \n        }\n      }\n    ]\n  },\n  mutations: {\n    SET_MAP(state, { map, flag }) {\n      state.map = map;\n      state.isMapLoaded = flag;\n    },\n    ADD_MARK(state, payload) {\n      console.log(state.map)\n      state.map.geoObjects.add(payload);\n    },\n  },\n  actions: {\n    createMap({ commit, dispatch }) {\n      ymaps.ready(() => {\n        const map = new ymaps.Map('map', {\n          center: [59.938955, 30.315644],\n          zoom: 10,\n          controls: [],\n        })\n        commit('SET_MAP', {map: map, flag: true } )\n        dispatch('addMarks');\n      })\n    },\n    addMarks({ state, commit }) {\n        if (!state.map) {\n          return;\n        }\n\n        let universitiesCollection = new ymaps.GeoObjectCollection(null);\n        let universitiesArr = [\n          {\n            name: \"ЛЭТИ\",\n            coordinates: [59.971942, 30.324294],\n          },\n          {\n            name: \"СПБГУ\",\n            coordinates: [59.941636, 30.299563],\n          },\n          {\n            name: \"БОНЧ\",\n            coordinates: [59.902821, 30.489175],\n          }\n        ];\n        \n        let config = state.marksConfigs.find(item => item.id === 'universities').config;\n        \n        for(let place of universitiesArr) {\n          universitiesCollection.add(new ymaps.Placemark(place.coordinates, {\n            balloonContent: place.name\n          }, config))\n        }\n        \n        let map = state.map;\n        commit(\"ADD_MARK\", universitiesCollection);\n    },\n  },\n})\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAElC,MAAMC,KAAK,GAAGC,MAAM,CAACD,KAAK;AAE1B,eAAeD,WAAW,CAAC;EACzBG,KAAK,EAAE;IACLC,SAAS,EAAE,IAAI;IACfC,WAAW,EAAE,KAAK;IAClBC,YAAY,EAAE,CACZ;MACEC,EAAE,EAAE,cAAc;MAClBC,MAAM,EAAE;QACNC,UAAU,EAAE,eAAe;QAC3BC,aAAa,EAAE,0BAA0B;QACzCC,aAAa,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;QACvBC,eAAe,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE;MAC5B;IACF,CAAC;EAEL,CAAC;EACDC,SAAS,EAAE;IACTC,OAAOA,CAACX,KAAK,EAAE;MAAEY,GAAG;MAAEC;IAAK,CAAC,EAAE;MAC5Bb,KAAK,CAACY,GAAG,GAAGA,GAAG;MACfZ,KAAK,CAACE,WAAW,GAAGW,IAAI;IAC1B,CAAC;IACDC,QAAQA,CAACd,KAAK,EAAEe,OAAO,EAAE;MACvBC,OAAO,CAACC,GAAG,CAACjB,KAAK,CAACY,GAAG,CAAC;MACtBZ,KAAK,CAACY,GAAG,CAACM,UAAU,CAACC,GAAG,CAACJ,OAAO,CAAC;IACnC;EACF,CAAC;EACDK,OAAO,EAAE;IACPC,SAASA,CAAC;MAAEC,MAAM;MAAEC;IAAS,CAAC,EAAE;MAC9BzB,KAAK,CAAC0B,KAAK,CAAC,MAAM;QAChB,MAAMZ,GAAG,GAAG,IAAId,KAAK,CAAC2B,GAAG,CAAC,KAAK,EAAE;UAC/BC,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;UAC9BC,IAAI,EAAE,EAAE;UACRC,QAAQ,EAAE;QACZ,CAAC,CAAC;QACFN,MAAM,CAAC,SAAS,EAAE;UAACV,GAAG,EAAEA,GAAG;UAAEC,IAAI,EAAE;QAAK,CAAE,CAAC;QAC3CU,QAAQ,CAAC,UAAU,CAAC;MACtB,CAAC,CAAC;IACJ,CAAC;IACDM,QAAQA,CAAC;MAAE7B,KAAK;MAAEsB;IAAO,CAAC,EAAE;MACxB,IAAI,CAACtB,KAAK,CAACY,GAAG,EAAE;QACd;MACF;MAEA,IAAIkB,sBAAsB,GAAG,IAAIhC,KAAK,CAACiC,mBAAmB,CAAC,IAAI,CAAC;MAChE,IAAIC,eAAe,GAAG,CACpB;QACEC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE,CAAC,SAAS,EAAE,SAAS;MACpC,CAAC,EACD;QACED,IAAI,EAAE,OAAO;QACbC,WAAW,EAAE,CAAC,SAAS,EAAE,SAAS;MACpC,CAAC,EACD;QACED,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE,CAAC,SAAS,EAAE,SAAS;MACpC,CAAC,CACF;MAED,IAAI7B,MAAM,GAAGL,KAAK,CAACG,YAAY,CAACgC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAAChC,EAAE,KAAK,cAAc,CAAC,CAACC,MAAM;MAE/E,KAAI,IAAIgC,KAAK,IAAIL,eAAe,EAAE;QAChCF,sBAAsB,CAACX,GAAG,CAAC,IAAIrB,KAAK,CAACwC,SAAS,CAACD,KAAK,CAACH,WAAW,EAAE;UAChEK,cAAc,EAAEF,KAAK,CAACJ;QACxB,CAAC,EAAE5B,MAAM,CAAC,CAAC;MACb;MAEA,IAAIO,GAAG,GAAGZ,KAAK,CAACY,GAAG;MACnBU,MAAM,CAAC,UAAU,EAAEQ,sBAAsB,CAAC;IAC9C;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}